---
layout: '../../layouts/Post.astro'
title: "技术架构中的细腰"
image: 'https://images.unsplash.com/photo-1492136344046-866c85e0bf04?q=10'
pubDate: 2022-09-12T22:49:08+08:00
draft: false
category: 'Technology'
---

# 背景

处理器指令集基本上分成两个流派：

* CISC（复杂指令计算机）：例如 Intel 的 x86 平台。特点是 ISA 功能多，但是复杂混乱 （ISA，指令集架构）
* RISC（精简指令计算机）：例如苹果、思科、Sun 等。特点是有一个更精简的 ISA，处理器会专注于核心指令，复杂的功能交给软件来完成，所以它的性能、功耗都更优秀

处理器多年以来一直处于“战争”状态，上一次战争的结果是 Intel x86 轻松获胜，获胜的关键点就在 ISA。

# PC 时代

PC 用户对性能和功耗的需求没有那么强，CISC 在当时是个比较成熟的方案。而 RISC 刚兴起，反而是 PC 软件开发者认为 ISA 功能丰富度很重要。

Intel 认知到：硬件是一种软件。如果新的 CPU 实现了一个重要的 ISA 扩展，消费者将有充分的理由升级。比如，一个软件需要至关重要的安全扩展，Intel 可以内置，而 RISC 风格的处理器会让软件来完成。

现如今，移动互联网又带火了 ARM 架构。长期来看 RISC 没有失败，甚至在逐渐兑现刚提出时的愿景，CISC 看起来又是一个“没什么前途”的方向。

# 细腰

如果把计算机系统堆栈分层来看，上层是应用程序，底层是硬件。ISA 是整个堆栈的细腰部分。作为技术栈中最稳定的“细腰”接口，x86 ISA 是功能丰富的关键。

![ISA-narrow-waist](https://raw.gitmirror.com/superche/blog-img/main/narrow-waist.png)

# 认知

* 细腰通常对应的特点是：简单、抽象、功能正交、功能组合
* 细腰的功能丰富度会帮助商业成功，但是也带来了复杂度和性能体验问题
* 当上下游被某个大公司把控时，细腰是可以被替代的，例如 Google QUIC 对于 TCP

